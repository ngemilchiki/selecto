!function(){for(var e=document.getElementsByClassName("selecto"),t=function(e,t,n){var a=document.createElement(e);for(var i in t)a.setAttribute(i,t[i]);for(var i in n)a.addEventListener(i,n[i]);return a},n=function(e){e.parentNode.removeChild(e.parentNode.getElementsByClassName(e.className)[0])},a=0;a<e.length;a++)!function(n){var i,o,r,l;i=e[a],o=i.parentNode,r={placeholder:i.getAttribute("placeholder")||"",multiple:i.multiple,name:function(){return r.multiple?i.name+"[]":i.name},required:i.required,options:i.getElementsByTagName("option")},(l={part:{},init:function(){var e=t("div",{class:"selecto-box"}),n=t("div",{class:"selecto-result"}),a=t("div",{class:"selecto-input",contentEditable:!0,"data-placeholder":r.placeholder,"data-type":r.multiple?"multiple":"single"},{keyup:l.search,keypress:function(e){13==(e=e||window.event).keyCode&&e.preventDefault()},keydown:function(e){27==(e=e||window.event).keyCode&&l.part["selecto-input"].blur()},focus:function(){l.part["selecto-box"].setAttribute("data-show",!0),l.part["selecto-input"].innerHTML="",l.list(l.option())},blur:function(){l.part["selecto-box"].removeAttribute("data-show"),l.selected()}}),i=t("div",{class:"selecto-option"}),d=t("ul");i.appendChild(d),e.appendChild(a),e.appendChild(n),e.appendChild(i),o.appendChild(e),l.part[e.className]=e;for(var s in e.childNodes)l.part[e.childNodes[s].className]=e.childNodes[s];l.selected()},search:function(e){var t="",n=l.part["selecto-input"].childNodes,a=l.option();for(var i in n)if(3==n[i].nodeType){t=n[i].textContent.toLowerCase();break}a=a.filter(function(e){return e.text.toLowerCase().indexOf(t)>=0}),l.list(a)},attach:function(e){if(!r.multiple)for(var t=0;t<r.options.length;t++)r.options[t].removeAttribute("data-selected");r.options[e.target.getAttribute("data-index")].setAttribute("data-selected",!0),l.selected()},detach:function(e){e.preventDefault(),r.options[e.target.getAttribute("data-index")].removeAttribute("data-selected"),l.selected()},selected:function(){var e=l.part["selecto-result"],n=l.part["selecto-input"],a=l.option().filter(function(e){return"true"==e.selected});if(e.innerHTML="",n.innerHTML="",a.length>0)for(var i in a){var o=t("input",{type:"text",name:r.name(),value:a[i].value,required:r.required});if(r.multiple){var d=t("a"),s=t("span",{"data-index":a[i].index},{mousedown:l.detach});s.textContent=a[i].text,d.appendChild(s),n.appendChild(d)}else n.textContent=a[i].text;e.appendChild(o)}else{o=t("input",{type:"text",name:r.name(),required:r.required});e.appendChild(o)}},list:function(e){var n=l.part["selecto-option"].firstChild;n.innerHTML="";for(var a in e){var i=t("li",{"data-index":e[a].index,"data-value":e[a].value});i.textContent=e[a].text,n.appendChild(i),e[a].selected?i.setAttribute("data-selected",!0):i.onmousedown=l.attach}},option:function(){for(var e=[],t=0;t<r.options.length;t++){var n=r.options[t].textContent,a=r.options[t].value||n,i=r.options[t].getAttribute("data-selected")||!1;e[t]={index:t,text:n,value:a,selected:i}}return e.sort(function(e,t){var n=e.text,a=t.text;if(isNaN(n)){var i=0;return(n=n.toLowerCase())>(a=a.toLowerCase())?i=1:n<a&&(i=-1),i}return parseInt(n)-parseInt(a)}),e}}).init()}();for(;e.length>0;)n(e[0])}();
